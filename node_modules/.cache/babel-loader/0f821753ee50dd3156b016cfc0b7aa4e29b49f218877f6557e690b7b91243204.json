{"ast":null,"code":"var _jsxFileName = \"/Users/chestonopsasnick/Documents/Coding_Projects/DeltsDineV2/client/src/utils/ProtectedRoutes.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Outlet, Navigate } from \"react-router-dom\";\nimport { useValidation } from './ValidationContext'; // Import the useValidation hook\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function requestAuth() {\n  let ret = null;\n  fetch('http://localhost:3001/api/validation', {\n    method: 'GET',\n    credentials: 'include' // ensure cookies are sent with the request\n  }).then(res => res.json()).then(data => {\n    console.log(data);\n    if (data.isAuthenticated) {\n      ret = true;\n      console.log(\"if is authenitcated ret is: \" + ret);\n    } else {\n      ret = false;\n    }\n  }).catch(err => {\n    console.log('Error fetching validation data:', err);\n    ret = false;\n  });\n  return ret;\n}\nfunction ProtectedRoutes() {\n  _s();\n  // const {validated} = useValidation();\n  // console.log(\"protected routes \" + validated);\n  // // Handle loading state if validation is still being checked\n\n  // if (validated === null) {\n  //     return <div>Loading...</div>; // replace with loading ui\n  // }\n  const [validated, setValidated] = useState(null);\n  console.log(\"validated value right after declaration:  \" + validated);\n  useEffect(() => {\n    const checkAuth = async () => {\n      const isValidated = await requestAuth();\n      console.log(\"isValidated: \" + isValidated);\n      setValidated(isValidated);\n    };\n    checkAuth();\n  }, []);\n  console.log(\"is validated a truthy?: \" + (validated == true));\n  // if(validated === null) {\n  //     return <div> LOADING......</div>\n  // }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: validated ? /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 26\n    }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 38\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n_s(ProtectedRoutes, \"dIZMNdke310xir7HJqG8xlitzcs=\");\n_c = ProtectedRoutes;\nexport default ProtectedRoutes;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoutes\");","map":{"version":3,"names":["React","useEffect","useState","Outlet","Navigate","useValidation","jsxDEV","_jsxDEV","requestAuth","ret","fetch","method","credentials","then","res","json","data","console","log","isAuthenticated","catch","err","ProtectedRoutes","_s","validated","setValidated","checkAuth","isValidated","children","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["/Users/chestonopsasnick/Documents/Coding_Projects/DeltsDineV2/client/src/utils/ProtectedRoutes.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport { Outlet, Navigate } from \"react-router-dom\";\nimport { useValidation } from './ValidationContext'; // Import the useValidation hook\n\nasync function requestAuth() {\n    let ret = null;\n    fetch('http://localhost:3001/api/validation', {\n        method: 'GET',\n        credentials: 'include', // ensure cookies are sent with the request\n    })\n    .then(res => res.json())   \n    .then(data => {\n        console.log(data);\n        if (data.isAuthenticated) {\n            ret = true;\n            console.log(\"if is authenitcated ret is: \" + ret);\n        } else {\n            ret = false;\n        }\n    })\n    .catch (err =>{\n        console.log('Error fetching validation data:', err);\n        ret = false;\n    });\n    return ret;\n}\nfunction ProtectedRoutes() {\n    // const {validated} = useValidation();\n    // console.log(\"protected routes \" + validated);\n    // // Handle loading state if validation is still being checked\n\n    // if (validated === null) {\n    //     return <div>Loading...</div>; // replace with loading ui\n    // }\n    const [validated, setValidated] = useState(null);\n    console.log(\"validated value right after declaration:  \" + validated);\n    useEffect(() => {\n        const checkAuth = async () => {\n        const isValidated = await requestAuth();\n        console.log(\"isValidated: \" + isValidated);\n        setValidated(isValidated);\n        };\n        checkAuth();\n    }, []);\n    console.log(\"is validated a truthy?: \" + (validated == true));\n    // if(validated === null) {\n    //     return <div> LOADING......</div>\n    // }\n    return (\n        <div>\n            {validated ? <Outlet/> : <Navigate to=\"/login\"/>}\n        </div>\n    )\n}\nexport default ProtectedRoutes"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,SAASC,MAAM,EAAEC,QAAQ,QAAQ,kBAAkB;AACnD,SAASC,aAAa,QAAQ,qBAAqB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAErD,eAAeC,WAAWA,CAAA,EAAG;EACzB,IAAIC,GAAG,GAAG,IAAI;EACdC,KAAK,CAAC,sCAAsC,EAAE;IAC1CC,MAAM,EAAE,KAAK;IACbC,WAAW,EAAE,SAAS,CAAE;EAC5B,CAAC,CAAC,CACDC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,IAAI;IACVC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjB,IAAIA,IAAI,CAACG,eAAe,EAAE;MACtBV,GAAG,GAAG,IAAI;MACVQ,OAAO,CAACC,GAAG,CAAC,8BAA8B,GAAGT,GAAG,CAAC;IACrD,CAAC,MAAM;MACHA,GAAG,GAAG,KAAK;IACf;EACJ,CAAC,CAAC,CACDW,KAAK,CAAEC,GAAG,IAAG;IACVJ,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEG,GAAG,CAAC;IACnDZ,GAAG,GAAG,KAAK;EACf,CAAC,CAAC;EACF,OAAOA,GAAG;AACd;AACA,SAASa,eAAeA,CAAA,EAAG;EAAAC,EAAA;EACvB;EACA;EACA;;EAEA;EACA;EACA;EACA,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAChDe,OAAO,CAACC,GAAG,CAAC,4CAA4C,GAAGM,SAAS,CAAC;EACrEvB,SAAS,CAAC,MAAM;IACZ,MAAMyB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC9B,MAAMC,WAAW,GAAG,MAAMnB,WAAW,CAAC,CAAC;MACvCS,OAAO,CAACC,GAAG,CAAC,eAAe,GAAGS,WAAW,CAAC;MAC1CF,YAAY,CAACE,WAAW,CAAC;IACzB,CAAC;IACDD,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EACNT,OAAO,CAACC,GAAG,CAAC,0BAA0B,IAAIM,SAAS,IAAI,IAAI,CAAC,CAAC;EAC7D;EACA;EACA;EACA,oBACIjB,OAAA;IAAAqB,QAAA,EACKJ,SAAS,gBAAGjB,OAAA,CAACJ,MAAM;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,gBAAGzB,OAAA,CAACH,QAAQ;MAAC6B,EAAE,EAAC;IAAQ;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC/C,CAAC;AAEd;AAACT,EAAA,CA3BQD,eAAe;AAAAY,EAAA,GAAfZ,eAAe;AA4BxB,eAAeA,eAAe;AAAA,IAAAY,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}