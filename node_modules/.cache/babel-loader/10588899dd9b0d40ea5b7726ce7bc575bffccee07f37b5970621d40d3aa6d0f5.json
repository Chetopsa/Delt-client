{"ast":null,"code":"var _jsxFileName = \"/Users/chestonopsasnick/Documents/Coding_Projects/Delt-client/src/screens/menu.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { ChevronLeft, ChevronRight, Calendar, X } from \"lucide-react\";\nimport MenuItem from \"../components/MenuItem\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Alert = ({\n  message,\n  type,\n  onClose\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex items-center justify-between w-full max-w-2xl p-4 mb-4 rounded-lg ${type === \"error\" ? \"bg-red-100 text-red-800\" : \"bg-green-100 text-green-800\"}`,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"flex-1\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      className: \"ml-4 p-1 hover:bg-red-200 rounded-full transition-colors\",\n      \"aria-label\": \"Close alert\",\n      children: /*#__PURE__*/_jsxDEV(X, {\n        className: \"h-4 w-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 5\n  }, this);\n};\n_c = Alert;\nconst WeekNavigator = ({\n  currentDate,\n  onPreviousWeek,\n  onNextWeek\n}) => {\n  const formatDate = date => {\n    return new Intl.DateTimeFormat('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    }).format(date);\n  };\n  const getWeekRange = date => {\n    const startOfWeek = new Date(date);\n    startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay() + 1);\n    const endOfWeek = new Date(startOfWeek);\n    endOfWeek.setDate(startOfWeek.getDate() + 6);\n    return {\n      start: formatDate(startOfWeek),\n      end: formatDate(endOfWeek)\n    };\n  };\n  const weekRange = getWeekRange(currentDate);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center space-x-4 bg-white rounded-lg shadow-md p-4 mb-6 w-full max-w-2xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onPreviousWeek,\n      className: \"flex items-center justify-center p-2 rounded-full hover:bg-gray-100 transition-colors\",\n      \"aria-label\": \"Previous week\",\n      children: /*#__PURE__*/_jsxDEV(ChevronLeft, {\n        className: \"h-6 w-6 text-gray-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-3\",\n      children: [/*#__PURE__*/_jsxDEV(Calendar, {\n        className: \"h-5 w-5 text-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-lg font-medium text-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: weekRange.start\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mx-2\",\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: weekRange.end\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onNextWeek,\n      className: \"flex items-center justify-center p-2 rounded-full hover:bg-gray-100 transition-colors\",\n      \"aria-label\": \"Next week\",\n      children: /*#__PURE__*/_jsxDEV(ChevronRight, {\n        className: \"h-6 w-6 text-gray-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_c2 = WeekNavigator;\nconst Menu = () => {\n  _s();\n  const [meals, setMeals] = useState([]);\n  const [registeredMeals, setRegisteredMeals] = useState([]);\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [selectedMeals, setSelectedMeals] = useState([]);\n  const [alert, setAlert] = useState(null);\n  const [isAdmin, setIsAdmin] = useState(false);\n  useEffect(() => {\n    // get isAdmin status\n    const fetchIsAdmin = async () => {\n      try {\n        const res = await fetch(process.env.REACT_APP_BACKENDURL + \"/api/validation\", {\n          method: \"GET\",\n          credentials: \"include\"\n        });\n        if (!res.ok) throw new Error(\"Server gave bad response for isAdmin\");\n        const data = await res.json();\n        setIsAdmin(data.isAdmin);\n      } catch (err) {\n        console.error(\"Error fetching isAdmin:\", err);\n      }\n    };\n    fetchIsAdmin();\n    const dateString = currentDate.toISOString().split(\"T\")[0];\n    console.log(\"dateString: \" + dateString);\n    const fetchMenu = async () => {\n      try {\n        const res = await fetch(process.env.REACT_APP_BACKENDURL + \"/api/getMenu\", {\n          headers: {\n            \"content-type\": \"application/json\"\n          },\n          method: \"POST\",\n          credentials: \"include\",\n          body: JSON.stringify({\n            currentDate: dateString\n          })\n        });\n        if (!res.ok) throw new Error(\"Server gave bad response for getting menu\");\n        const data = await res.json();\n        const dayMap = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n        const transformedMeals = data.meals.map(meal => ({\n          mealID: meal.mealID,\n          date: meal.date,\n          isDinner: meal.isDinner,\n          day: dayMap[meal.dayOfWeek],\n          dayOfWeek: meal.dayOfWeek,\n          description: meal.description,\n          spotsTaken: meal.spotsTaken,\n          spotsAvaliable: meal.spotsAvailable,\n          names: []\n        }));\n        // sort meals based on day of week\n        transformedMeals.sort((a, b) => a.dayOfWeek - b.dayOfWeek);\n        console.log(transformedMeals);\n        setMeals(transformedMeals);\n        fetchRSVPS(transformedMeals);\n      } catch (err) {\n        console.error(\"Error fetching menu:\", err);\n        setAlert({\n          type: \"error\",\n          message: \"Failed to load menu\"\n        });\n      }\n    };\n    const fetchRSVPS = async updatedMeals => {\n      try {\n        const res = await fetch(process.env.REACT_APP_BACKENDURL + \"/api/getRSVPs?date=\" + currentDate.toISOString().split('T')[0], {\n          method: \"GET\",\n          credentials: \"include\"\n        });\n        if (!res.ok) throw new Error(\"Server gave bad response for getting RSVPs\");\n        const data = await res.json();\n        //set the meals to include the names of the rsvp associated with each meal ID\n        // Update meals with RSVP data using latest state\n        const mealsWithRSVPs = updatedMeals.map(meal => {\n          const rsvpEntry = data.rsvps.find(item => item.mealID === meal.mealID);\n          return rsvpEntry ? {\n            ...meal,\n            names: rsvpEntry.users\n          } : meal;\n        });\n\n        // Set updated meals\n        setMeals(mealsWithRSVPs);\n\n        // Update the state with the new meals data\n\n        console.log(\"updated meals: \" + mealsWithRSVPs);\n        setRegisteredMeals(data.selectedMeals);\n        console.log(\"Registered meals: \" + registeredMeals);\n      } catch (err) {\n        console.log(\"failed to fetch rsvps's: \" + err);\n      }\n    };\n    fetchMenu();\n  }, [currentDate]);\n  const handleMealSelect = mealID => {\n    setSelectedMeals(prev => {\n      if (prev.includes(mealID)) {\n        return prev.filter(id => id !== mealID);\n      }\n      if (prev.length >= 2) {\n        setAlert({\n          type: \"error\",\n          message: \"You can only select up to 2 meals\"\n        });\n        return prev;\n      }\n      return [...prev, mealID];\n    });\n  };\n  const handleConfirmRSVP = async () => {\n    if (selectedMeals.length === 0) {\n      setAlert({\n        type: \"error\",\n        message: \"Please select at least one meal\"\n      });\n      return;\n    }\n    try {\n      for (const mealID of selectedMeals) {\n        console.log(\"selected meals \", mealID);\n        const response = await fetch(process.env.REACT_APP_BACKENDURL + \"/api/newRSVP\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          credentials: \"include\",\n          body: JSON.stringify({\n            mealID: mealID\n          })\n        });\n        const data = await response.json();\n        if (!data.success) {\n          throw new Error(data.message);\n        }\n        setMeals(prevMeals => prevMeals.map(meal => meal.mealID === mealID ? {\n          ...meal,\n          spotsTaken: meal.spotsTaken + 1\n        } : meal));\n        setRegisteredMeals(prevRegistered => [...prevRegistered, mealID]);\n      }\n      setAlert({\n        type: \"success\",\n        message: \"Successfully RSVP'd to selected meals!\"\n      });\n      setSelectedMeals([]);\n    } catch (error) {\n      setAlert({\n        type: \"error\",\n        message: error.message || \"Failed to RSVP\"\n      });\n    }\n  };\n  const goToPreviousWeek = () => {\n    const newDate = new Date(currentDate);\n    newDate.setDate(currentDate.getDate() - 7);\n    setCurrentDate(newDate);\n    setSelectedMeals([]);\n  };\n  const goToNextWeek = () => {\n    const newDate = new Date(currentDate);\n    newDate.setDate(currentDate.getDate() + 7);\n    setCurrentDate(newDate);\n    setSelectedMeals([]);\n  };\n  const lunchMeals = meals.filter(meal => !meal.isDinner);\n  const dinnerMeals = meals.filter(meal => meal.isDinner);\n  const handleDeleteRSVP = async mealID => {\n    try {\n      const response = await fetch(process.env.REACT_APP_BACKENDURL + \"/api/deleteRSVP\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          mealID\n        })\n      });\n      const data = await response.json();\n      if (!data.success) {\n        throw new Error(data.message);\n      }\n\n      // Remove the meal from registeredMeals\n      setRegisteredMeals(prevRegistered => prevRegistered.filter(id => id !== mealID));\n      // Refetch the menu to get updated counts by resetting date\n      setCurrentDate(new Date(currentDate));\n      setAlert({\n        type: \"success\",\n        message: \"Successfully cancelled RSVP\"\n      });\n    } catch (error) {\n      setAlert({\n        type: \"error\",\n        message: error.message || \"Failed to cancel RSVP\"\n      });\n    }\n  };\n  const handleDeleteItem = async mealID => {\n    try {\n      const res = await fetch(process.env.REACT_APP_BACKENDURL + \"/api/deleteMeal\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          mealID\n        })\n      });\n      const data = await res.json();\n      if (!data.success) {\n        throw new Error(\"error deleting messages\");\n      }\n      // refresh menu to reflect deleted item\n      setCurrentDate(new Date(currentDate));\n    } catch (err) {\n      setAlert({\n        type: \"error\",\n        message: \"Failed to delete meal\"\n      });\n      console.log(\"failed to delete meal: \" + err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold mb-4\",\n      children: \"Meal Menu\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), alert && /*#__PURE__*/_jsxDEV(Alert, {\n      message: alert.message,\n      type: alert.type,\n      onClose: () => setAlert(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(WeekNavigator, {\n      currentDate: currentDate,\n      onPreviousWeek: goToPreviousWeek,\n      onNextWeek: goToNextWeek\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), selectedMeals.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleConfirmRSVP,\n      className: \"mb-6 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200\",\n      children: [\"Confirm RSVP (\", selectedMeals.length, \"/2 selected)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold mb-4 text-center\",\n        children: \"Lunch\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex overflow-x-auto pb-4 gap-2 px-4 min-w-full\",\n        children: lunchMeals.map(meal => /*#__PURE__*/_jsxDEV(MenuItem, {\n          item: meal,\n          onSelect: handleMealSelect,\n          onDelete: handleDeleteRSVP,\n          onDeleteItem: handleDeleteItem,\n          isAdmin: isAdmin,\n          isSelected: selectedMeals.includes(meal.mealID),\n          isRegistered: registeredMeals.includes(meal.mealID),\n          disabled: selectedMeals.length + registeredMeals.length >= 2 && !selectedMeals.includes(meal.mealID),\n          className: \"first:ml-auto last:mr-auto\"\n        }, meal.mealID, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold mb-4 text-center\",\n        children: \"Dinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex overflow-x-auto pb-4 gap-2 pl-4 md:pl-8\",\n        children: dinnerMeals.map(meal => /*#__PURE__*/_jsxDEV(MenuItem, {\n          item: meal,\n          onSelect: handleMealSelect,\n          onDelete: handleDeleteRSVP,\n          onDeleteItem: handleDeleteItem,\n          isAdmin: isAdmin,\n          isSelected: selectedMeals.includes(meal.mealID),\n          isRegistered: registeredMeals.includes(meal.mealID),\n          disabled: selectedMeals.length + registeredMeals.length >= 2 && !selectedMeals.includes(meal.mealID),\n          className: \"first:ml-auto last:mr-auto\"\n        }, meal.mealID, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 294,\n    columnNumber: 5\n  }, this);\n};\n_s(Menu, \"SsdVQgC7MqYoUBWQHW/QB+z8jPc=\");\n_c3 = Menu;\nexport default Menu;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Alert\");\n$RefreshReg$(_c2, \"WeekNavigator\");\n$RefreshReg$(_c3, \"Menu\");","map":{"version":3,"names":["React","useState","useEffect","ChevronLeft","ChevronRight","Calendar","X","MenuItem","jsxDEV","_jsxDEV","Alert","message","type","onClose","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","WeekNavigator","currentDate","onPreviousWeek","onNextWeek","formatDate","date","Intl","DateTimeFormat","month","day","year","format","getWeekRange","startOfWeek","Date","setDate","getDate","getDay","endOfWeek","start","end","weekRange","_c2","Menu","_s","meals","setMeals","registeredMeals","setRegisteredMeals","setCurrentDate","selectedMeals","setSelectedMeals","alert","setAlert","isAdmin","setIsAdmin","fetchIsAdmin","res","fetch","process","env","REACT_APP_BACKENDURL","method","credentials","ok","Error","data","json","err","console","error","dateString","toISOString","split","log","fetchMenu","headers","body","JSON","stringify","dayMap","transformedMeals","map","meal","mealID","isDinner","dayOfWeek","description","spotsTaken","spotsAvaliable","spotsAvailable","names","sort","a","b","fetchRSVPS","updatedMeals","mealsWithRSVPs","rsvpEntry","rsvps","find","item","users","handleMealSelect","prev","includes","filter","id","length","handleConfirmRSVP","response","success","prevMeals","prevRegistered","goToPreviousWeek","newDate","goToNextWeek","lunchMeals","dinnerMeals","handleDeleteRSVP","handleDeleteItem","onSelect","onDelete","onDeleteItem","isSelected","isRegistered","disabled","_c3","$RefreshReg$"],"sources":["/Users/chestonopsasnick/Documents/Coding_Projects/Delt-client/src/screens/menu.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ChevronLeft, ChevronRight, Calendar, X } from \"lucide-react\";\nimport MenuItem from \"../components/MenuItem\";\n\nconst Alert = ({ message, type, onClose }) => {\n  return (\n    <div \n      className={`flex items-center justify-between w-full max-w-2xl p-4 mb-4 rounded-lg ${\n        type === \"error\" ? \"bg-red-100 text-red-800\" : \"bg-green-100 text-green-800\"\n      }`}\n    >\n      <p className=\"flex-1\">{message}</p>\n      <button \n        onClick={onClose}\n        className=\"ml-4 p-1 hover:bg-red-200 rounded-full transition-colors\"\n        aria-label=\"Close alert\"\n      >\n        <X className=\"h-4 w-4\" />\n      </button>\n    </div>\n  );\n};\n\nconst WeekNavigator = ({ currentDate, onPreviousWeek, onNextWeek }) => {\n  const formatDate = (date) => {\n    return new Intl.DateTimeFormat('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    }).format(date);\n  };\n\n  const getWeekRange = (date) => {\n    const startOfWeek = new Date(date);\n    startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay()+1);\n    const endOfWeek = new Date(startOfWeek);\n    endOfWeek.setDate(startOfWeek.getDate() + 6);\n    return {\n      start: formatDate(startOfWeek),\n      end: formatDate(endOfWeek)\n    };\n  };\n\n  const weekRange = getWeekRange(currentDate);\n\n  return (\n    <div className=\"flex items-center justify-center space-x-4 bg-white rounded-lg shadow-md p-4 mb-6 w-full max-w-2xl\">\n      <button\n        onClick={onPreviousWeek}\n        className=\"flex items-center justify-center p-2 rounded-full hover:bg-gray-100 transition-colors\"\n        aria-label=\"Previous week\"\n      >\n        <ChevronLeft className=\"h-6 w-6 text-gray-600\" />\n      </button>\n\n      <div className=\"flex items-center space-x-3\">\n        <Calendar className=\"h-5 w-5 text-blue-500\" />\n        <div className=\"text-lg font-medium text-gray-700\">\n          <span>{weekRange.start}</span>\n          <span className=\"mx-2\">-</span>\n          <span>{weekRange.end}</span>\n        </div>\n      </div>\n\n      <button\n        onClick={onNextWeek}\n        className=\"flex items-center justify-center p-2 rounded-full hover:bg-gray-100 transition-colors\"\n        aria-label=\"Next week\"\n      >\n        <ChevronRight className=\"h-6 w-6 text-gray-600\" />\n      </button>\n    </div>\n  );\n};\n\n\nconst Menu = () => {\n  const [meals, setMeals] = useState([]);\n  const [registeredMeals, setRegisteredMeals] = useState([]);\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [selectedMeals, setSelectedMeals] = useState([]);\n  const [alert, setAlert] = useState(null);\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  useEffect(() => {\n    // get isAdmin status\n    const fetchIsAdmin = async () => {\n      try {\n        const res = await fetch(process.env.REACT_APP_BACKENDURL +\"/api/validation\", {\n          method: \"GET\",\n          credentials: \"include\",\n        });\n        if (!res.ok) throw new Error(\"Server gave bad response for isAdmin\");\n        const data = await res.json();\n        setIsAdmin(data.isAdmin);\n      } catch (err) {\n        console.error(\"Error fetching isAdmin:\", err);\n      }\n    };\n    fetchIsAdmin();\n    const dateString = currentDate.toISOString().split(\"T\")[0];\n    console.log(\"dateString: \" + dateString);\n    const fetchMenu = async () => {\n      try {\n        const res = await fetch(process.env.REACT_APP_BACKENDURL +\"/api/getMenu\", {\n          headers: { \"content-type\": \"application/json\" },\n          method: \"POST\",\n          credentials: \"include\",\n          body: JSON.stringify({currentDate: dateString}),\n        });\n\n        if (!res.ok) throw new Error(\"Server gave bad response for getting menu\");\n\n        const data = await res.json();\n        const dayMap = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n        \n        const transformedMeals = data.meals.map((meal) => ( {\n          mealID: meal.mealID,\n          date: meal.date,\n          isDinner: meal.isDinner,\n          day: dayMap[meal.dayOfWeek],\n          dayOfWeek: meal.dayOfWeek,\n          description: meal.description,\n          spotsTaken: meal.spotsTaken,\n          spotsAvaliable: meal.spotsAvailable,\n          names: [],\n        }));\n        // sort meals based on day of week\n        transformedMeals.sort((a, b) => a.dayOfWeek - b.dayOfWeek);\n        console.log(transformedMeals)\n        setMeals(transformedMeals);\n        fetchRSVPS(transformedMeals);\n      } catch (err) {\n        console.error(\"Error fetching menu:\", err);\n        setAlert({ type: \"error\", message: \"Failed to load menu\" });\n      }\n    };\n    const fetchRSVPS = async (updatedMeals) => {\n      try {\n        const res = await fetch(process.env.REACT_APP_BACKENDURL +\"/api/getRSVPs?date=\" +currentDate.toISOString().split('T')[0], {\n          method: \"GET\",\n          credentials: \"include\",\n        });\n        if (!res.ok) throw new Error(\"Server gave bad response for getting RSVPs\");\n        const data = await res.json();\n        //set the meals to include the names of the rsvp associated with each meal ID\n        // Update meals with RSVP data using latest state\n        const mealsWithRSVPs = updatedMeals.map(meal => {\n          const rsvpEntry = data.rsvps.find(item => item.mealID === meal.mealID);\n          return rsvpEntry ? { ...meal, names: rsvpEntry.users } : meal;\n        });\n\n        // Set updated meals\n        setMeals(mealsWithRSVPs);\n      \n        // Update the state with the new meals data\n        \n        console.log(\"updated meals: \" + mealsWithRSVPs);\n        \n        setRegisteredMeals(data.selectedMeals);\n        console.log(\"Registered meals: \" + registeredMeals);\n      } catch (err) {\n        console.log(\"failed to fetch rsvps's: \" + err)\n      }\n    };\n    fetchMenu();\n\n  }, [currentDate]);\n\n  const handleMealSelect = (mealID) => {\n    setSelectedMeals((prev) => {\n      if (prev.includes(mealID)) {\n        return prev.filter(id => id !== mealID);\n      }\n      if (prev.length >= 2) {\n        setAlert({ type: \"error\", message: \"You can only select up to 2 meals\" });\n        return prev;\n      }\n      return [...prev, mealID];\n    });\n  };\n\n  const handleConfirmRSVP = async () => {\n    if (selectedMeals.length === 0) {\n      setAlert({ type: \"error\", message: \"Please select at least one meal\" });\n      return;\n    }\n    \n    try {\n      for (const mealID of selectedMeals) {\n        console.log(\"selected meals \" , mealID);\n        const response = await fetch(process.env.REACT_APP_BACKENDURL +\"/api/newRSVP\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          credentials: \"include\",\n          body: JSON.stringify({ mealID: mealID }),\n        });\n\n        const data = await response.json();\n        \n        if (!data.success) {\n          throw new Error(data.message);\n        }\n\n        setMeals(prevMeals =>\n          prevMeals.map(meal =>\n            meal.mealID === mealID\n              ? { ...meal, spotsTaken: meal.spotsTaken + 1 }\n              : meal\n          )\n        );\n        setRegisteredMeals(prevRegistered => [...prevRegistered, mealID]);\n      }\n\n      setAlert({ type: \"success\", message: \"Successfully RSVP'd to selected meals!\" });\n      setSelectedMeals([]);\n    } catch (error) {\n      setAlert({ type: \"error\", message: error.message || \"Failed to RSVP\" });\n    }\n  };\n\n  const goToPreviousWeek = () => {\n    const newDate = new Date(currentDate);\n    newDate.setDate(currentDate.getDate() - 7);\n    setCurrentDate(newDate);\n    setSelectedMeals([]);\n  };\n\n  const goToNextWeek = () => {\n    const newDate = new Date(currentDate);\n    newDate.setDate(currentDate.getDate() + 7);\n    setCurrentDate(newDate);\n    setSelectedMeals([]);\n  };\n\n  const lunchMeals = meals.filter((meal) => !meal.isDinner);\n  const dinnerMeals = meals.filter((meal) => meal.isDinner);\n\n  const handleDeleteRSVP = async (mealID) => {\n    try {\n      const response = await fetch(process.env.REACT_APP_BACKENDURL +\"/api/deleteRSVP\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({ mealID }),\n      });\n\n      const data = await response.json();\n      \n      if (!data.success) {\n        throw new Error(data.message);\n      }\n\n      // Remove the meal from registeredMeals\n      setRegisteredMeals(prevRegistered => \n        prevRegistered.filter(id => id !== mealID)\n      );\n      // Refetch the menu to get updated counts by resetting date\n      setCurrentDate(new Date(currentDate));\n\n\n      setAlert({ \n        type: \"success\", \n        message: \"Successfully cancelled RSVP\" \n      });\n    } catch (error) {\n      setAlert({ \n        type: \"error\", \n        message: error.message || \"Failed to cancel RSVP\" \n      });\n    }\n  };\n  const handleDeleteItem = async (mealID) => {\n    try {\n      const res = await fetch(process.env.REACT_APP_BACKENDURL +\"/api/deleteMeal\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({ mealID }),\n      });\n      const data = await res.json();\n      if (!data.success) {\n        throw new Error(\"error deleting messages\");\n      }\n      // refresh menu to reflect deleted item\n      setCurrentDate(new Date(currentDate));\n    } catch (err) {\n      setAlert({ type: \"error\", message: \"Failed to delete meal\" });\n      console.log(\"failed to delete meal: \" +err);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <h1 className=\"text-3xl font-bold mb-4\">Meal Menu</h1>\n      \n      {alert && (\n        <Alert\n          message={alert.message}\n          type={alert.type}\n          onClose={() => setAlert(null)}\n        />\n      )}\n\n      <WeekNavigator \n        currentDate={currentDate}\n        onPreviousWeek={goToPreviousWeek}\n        onNextWeek={goToNextWeek}\n      />\n\n      {selectedMeals.length > 0 && (\n        <button\n          onClick={handleConfirmRSVP}\n          className=\"mb-6 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200\"\n        >\n          Confirm RSVP ({selectedMeals.length}/2 selected)\n        </button>\n      )}\n\n      <div className=\"w-full mb-8\">\n        <h2 className=\"text-2xl font-semibold mb-4 text-center\">Lunch</h2>\n        <div className=\"flex overflow-x-auto pb-4 gap-2 px-4 min-w-full\">\n          {lunchMeals.map((meal) => (\n            <MenuItem\n              key={meal.mealID}\n              item={meal}\n              onSelect={handleMealSelect}\n              onDelete={handleDeleteRSVP}\n              onDeleteItem={handleDeleteItem}\n              isAdmin={isAdmin}\n              isSelected={selectedMeals.includes(meal.mealID)}\n              isRegistered={registeredMeals.includes(meal.mealID)}\n              disabled={selectedMeals.length + registeredMeals.length >= 2 && !selectedMeals.includes(meal.mealID)}\n              className=\"first:ml-auto last:mr-auto\"\n            />\n          ))}\n        </div>\n      </div>\n\n      <div className=\"w-full\">\n      <h2 className=\"text-2xl font-semibold mb-4 text-center\">Dinner</h2>\n      <div className=\"flex overflow-x-auto pb-4 gap-2 pl-4 md:pl-8\">\n        {dinnerMeals.map((meal) => (\n          <MenuItem\n            key={meal.mealID}\n            item={meal}\n            onSelect={handleMealSelect}\n            onDelete={handleDeleteRSVP}\n            onDeleteItem={handleDeleteItem}\n            isAdmin={isAdmin}\n            isSelected={selectedMeals.includes(meal.mealID)}\n            isRegistered={registeredMeals.includes(meal.mealID)}\n            disabled={selectedMeals.length + registeredMeals.length >= 2 && !selectedMeals.includes(meal.mealID)}\n            className=\"first:ml-auto last:mr-auto\"\n          />\n        ))}\n      </div>\n    </div>\n  </div>\n  );\n};\n\nexport default Menu;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}